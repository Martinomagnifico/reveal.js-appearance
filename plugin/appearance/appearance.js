(function(a,p){typeof exports=="object"&&typeof module<"u"?module.exports=p():typeof define=="function"&&define.amd?define(p):(a=typeof globalThis<"u"?globalThis:a||self,a.Appearance=p())})(this,function(){"use strict";var N=Object.defineProperty;var z=(a,p,h)=>p in a?N(a,p,{enumerable:!0,configurable:!0,writable:!0,value:h}):a[p]=h;var l=(a,p,h)=>z(a,typeof p!="symbol"?p+"":p,h);var a=typeof document<"u"?document.currentScript:null;const p={activeclass:"active",activeelement:"li",barhtml:{header:"<nav class='menubar'><ul class='menu'></ul></nav>",footer:""},cssautoload:!0,csspath:"",flat:!1,menubarclass:"menubar",menuclass:"menu",scale:.67,selectby:"id"};function h(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var y,C;function w(){if(C)return y;C=1;var n=function(r){return e(r)&&!o(r)};function e(t){return!!t&&typeof t=="object"}function o(t){var r=Object.prototype.toString.call(t);return r==="[object RegExp]"||r==="[object Date]"||u(t)}var s=typeof Symbol=="function"&&Symbol.for,c=s?Symbol.for("react.element"):60103;function u(t){return t.$$typeof===c}function d(t){return Array.isArray(t)?[]:{}}function m(t,r){return r.clone!==!1&&r.isMergeableObject(t)?b(d(t),t,r):t}function O(t,r,i){return t.concat(r).map(function(g){return m(g,i)})}function I(t,r){if(!r.customMerge)return b;var i=r.customMerge(t);return typeof i=="function"?i:b}function L(t){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t).filter(function(r){return Object.propertyIsEnumerable.call(t,r)}):[]}function M(t){return Object.keys(t).concat(L(t))}function j(t,r){try{return r in t}catch{return!1}}function q(t,r){return j(t,r)&&!(Object.hasOwnProperty.call(t,r)&&Object.propertyIsEnumerable.call(t,r))}function F(t,r,i){var g={};return i.isMergeableObject(t)&&M(t).forEach(function(f){g[f]=m(t[f],i)}),M(r).forEach(function(f){q(t,f)||(j(t,f)&&i.isMergeableObject(r[f])?g[f]=I(f,i)(t[f],r[f],i):g[f]=m(r[f],i))}),g}function b(t,r,i){i=i||{},i.arrayMerge=i.arrayMerge||O,i.isMergeableObject=i.isMergeableObject||n,i.cloneUnlessOtherwiseSpecified=m;var g=Array.isArray(r),f=Array.isArray(t),D=g===f;return D?g?i.arrayMerge(t,r,i):F(t,r,i):m(r,i)}b.all=function(r,i){if(!Array.isArray(r))throw new Error("first argument should be an array");return r.reduce(function(g,f){return b(g,f,i)},{})};var x=b;return y=x,y}var U=w();const T=h(U);class E{constructor(e,o,s){l(this,"defaultConfig");l(this,"configModifier");l(this,"pluginInit");l(this,"pluginId");l(this,"mergedConfig",null);l(this,"data",{});typeof e=="string"?(this.pluginId=e,this.pluginInit=o,this.defaultConfig=s||{}):(this.pluginId=e.id,this.pluginInit=e.init,this.defaultConfig=e.defaultConfig||{},this.configModifier=e.configModifier)}initializeConfig(e){let o=this.defaultConfig;this.configModifier&&(o=this.configModifier(e,o));const c=e.getConfig()[this.pluginId]||{};this.mergedConfig=T(o,c,{arrayMerge:(u,d)=>d,clone:!0})}getCurrentConfig(){if(!this.mergedConfig)throw new Error("Plugin configuration has not been initialized");return this.mergedConfig}getData(){return Object.keys(this.data).length>0?this.data:void 0}init(e){if(this.initializeConfig(e),this.pluginInit)return this.pluginInit(this,e,this.getCurrentConfig())}createInterface(e={}){return{id:this.pluginId,init:s=>this.init(s),getConfig:()=>this.getCurrentConfig(),getData:()=>this.getData(),...e}}}const R=async(n,e,o=!0,s,c=!1)=>{if(o===!1||s===!1)return;if(document.querySelector(`[data-css-id="${n}"]`)){c&&console.log(`CSS for ${n} already loaded, skipping`);return}if(s)try{c&&console.log(`Using custom CSS path: ${s}`),await S(n,s,c);return}catch(d){throw console.warn(`Failed to load CSS from user-specified path: ${s}. Make sure the path is correct or remove the csspath option to use automatic path detection.`),d}const u=P(n,e);for(const d of u)try{c&&console.log(`Trying to load CSS from: ${d}`),await S(n,d,c);return}catch{c&&console.log(`Failed to load CSS from: ${d}`)}console.warn(`Could not load CSS for ${n} from any location. You may need to specify the path using a csspath parameter.`)},P=(n,e)=>{const o=[],s=v(n,e);s&&(o.push(`${s}${n}.css`),o.push(`${s}${n}.min.css`)),o.push(`node_modules/reveal.js-${n}/plugin/${n}/${n}.css`),o.push(`node_modules/reveal.js-${n}/dist/${n}.css`),o.push(`plugin/${n}/${n}.css`),o.push(`plugins/${n}/${n}.css`),o.push(`dist/plugin/${n}/${n}.css`);try{if(typeof{url:typeof document>"u"&&typeof location>"u"?require("url").pathToFileURL(__filename).href:typeof document>"u"?location.href:a&&a.tagName.toUpperCase()==="SCRIPT"&&a.src||new URL("plugin/appearance/appearance.js",document.baseURI).href}<"u"&&(typeof document>"u"&&typeof location>"u"?require("url").pathToFileURL(__filename).href:typeof document>"u"?location.href:a&&a.tagName.toUpperCase()==="SCRIPT"&&a.src||new URL("plugin/appearance/appearance.js",document.baseURI).href)){const c=(typeof document>"u"&&typeof location>"u"?require("url").pathToFileURL(__filename).href:typeof document>"u"?location.href:a&&a.tagName.toUpperCase()==="SCRIPT"&&a.src||new URL("plugin/appearance/appearance.js",document.baseURI).href).slice(0,(typeof document>"u"&&typeof location>"u"?require("url").pathToFileURL(__filename).href:typeof document>"u"?location.href:a&&a.tagName.toUpperCase()==="SCRIPT"&&a.src||new URL("plugin/appearance/appearance.js",document.baseURI).href).lastIndexOf("/")+1);o.push(`${c}${n}.css`)}}catch{}return o},v=(n,e)=>{const o=[`${n}.js`,`${n}.min.js`,`${e}.js`,`${e}.min.js`];for(const s of o){const c=document.querySelector(`script[src*="${s}"]`);if(c&&c.src){const u=c.getAttribute("src")||"",d=u.lastIndexOf(s);if(d!==-1)return u.substring(0,d)}}return null},S=(n,e,o=!1)=>new Promise((s,c)=>{const u=document.createElement("link");u.rel="stylesheet",u.href=e,u.setAttribute("data-css-id",n);const d=setTimeout(()=>{o&&console.log(`Timeout loading CSS from: ${e}`),c(new Error(`Timeout loading CSS from: ${e}`))},5e3);u.onload=()=>{clearTimeout(d),o&&console.log(`CSS loaded from: ${e}`),s()},u.onerror=()=>{clearTimeout(d),c(new Error(`Failed to load CSS from: ${e}`))},document.head.appendChild(u)});(()=>{try{return!!(typeof document>"u"&&typeof location>"u"?require("url").pathToFileURL(__filename).href:typeof document>"u"?location.href:a&&a.tagName.toUpperCase()==="SCRIPT"&&a.src||new URL("plugin/appearance/appearance.js",document.baseURI).href)}catch{return!1}})();class _{constructor(){l(this,"debugMode",!1);l(this,"label","DEBUG");l(this,"log",(...e)=>{this.debugMode&&console.log(...e)});l(this,"warn",(...e)=>{this.debugMode&&console.warn(...e)});l(this,"error",(...e)=>{this.debugMode&&console.error(...e)});l(this,"info",(...e)=>{this.debugMode&&console.info(...e)});l(this,"labellog",(...e)=>{this.debugMode&&console.log(`[${this.label}]:`,...e)});l(this,"labelwarn",(...e)=>{this.debugMode&&console.warn(`[${this.label}]:`,...e)});l(this,"labelerror",(...e)=>{this.debugMode&&console.error(`[${this.label}]:`,...e)});l(this,"labelinfo",(...e)=>{this.debugMode&&console.info(`[${this.label}]:`,...e)});l(this,"group",(...e)=>{this.debugMode&&console.group(`[${this.label}]:`,...e)});l(this,"groupEnd",(...e)=>{this.debugMode&&console.groupEnd()})}initialize(e,o="DEBUG"){this.debugMode=e,this.label=o}}const $=new _,A=async(n,e,o)=>{$&&(o.debug||e.getConfig().debug)&&$.initialize(!0,"Appearance");const s=document.querySelector("[name=generator]");let c=!1;if(s instanceof HTMLMetaElement&&(c=s.content.includes("quarto")),!c)try{await R(n.pluginId,`reveal.js-${n.pluginId}`,o.cssautoload,o.csspath,o.debug)}catch(u){o.debug&&console.warn("CSS loading failed but plugin will continue:",u)}};return()=>new E("appearance",A,p).createInterface()});
