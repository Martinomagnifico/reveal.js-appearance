{"version":3,"file":"appearance.js","sources":["../../../src/plugin/js/helpers.js","../../../src/plugin/js/functions/get-load-css.js","../../../src/plugin/js/functions/add-auto-animation.js","../../../src/plugin/js/functions/fix-list-item.js","../../../src/plugin/js/functions/add-base-class.js","../../../src/plugin/js/functions/add-delay.js","../../../src/plugin/js/functions/get-appearance-arrays.js","../../../src/plugin/js/functions/convert-to-spans.js","../../../src/plugin/js/functions/show-hide-slide.js","../../../src/plugin/js/plugin.js"],"sourcesContent":["/**\n * Check if a given string is valid JSON.\n * @param {string} str - The string to be checked.\n * @returns {boolean} `true` if the string is valid JSON, otherwise `false`.\n */\nexport const isJSON = str => {\n\ttry {\n\t\treturn (JSON.parse(str) && !!str);\n\t} catch (e) {\n\t\treturn false;\n\t}\n};\n\n/**\n * Convert a NodeList into an array based on provided selectors.\n * @param {Element} container - The root element to begin querying.\n * @param {string} selectors - A string containing one or more CSS selectors separated by commas.\n * @returns {Element[]} Array of elements that match the given selectors.\n */\nexport const selectionArray = (container, selectors) => {\n\tlet selections = container.querySelectorAll(selectors);\n\tlet selectionarray = Array.prototype.slice.call(selections);\n\treturn selectionarray;\n};\n\n/**\n * Check if an element has child nodes that are `SECTION` elements.\n * @param {Object} param0 - Object with childNodes property.\n * @param {NodeListOf<ChildNode>} param0.childNodes - List of child nodes of the element.\n * @returns {boolean} `true` if the element contains `SECTION` child nodes, otherwise `false`.\n */\nexport const isStack = ({childNodes}) => {\n\tlet isStack = false;\n\tfor (let i = 0; i < childNodes.length; i++) {\n\t\tif (childNodes[i].tagName == \"SECTION\") {\n\t\t\tisStack = true;\n\t\t\tbreak;\n\t\t}\n\t}\n\treturn isStack;\n};\n\n/**\n * Copy data attributes from a source element to a target element with an optional exception.\n * @param {Object} param0 - Object with attributes property.\n * @param {NamedNodeMap} param0.attributes - Map of attributes of the source element.\n * @param {Element} target - Target element to copy attributes to.\n * @param {string} [not] - Optional attribute name to exclude from copying.\n */\nexport const copyDataAttributes = ({attributes}, target, not) => {\n\t[...attributes].filter(({nodeName}) => nodeName.includes('data')).forEach(({nodeName, nodeValue}) => {\n\t\tif ((not && nodeName !== not) || !not) {\n\t\t\ttarget.setAttribute(nodeName, nodeValue);\n\t\t}\n\t});\n};\n\n/**\n * Check if the given item is an object and not an array.\n * @param {*} item - The item to be checked.\n * @returns {boolean} `true` if the item is an object and not an array, otherwise `false`.\n */\nconst isObject = (item) => {\n\treturn (item && typeof item === 'object' && !Array.isArray(item));\n}\n\n/**\n * Deep merge multiple objects into a target object.\n * @param {Object} target - Target object to merge values into.\n * @param {...Object} sources - Source objects to merge from.\n * @returns {Object} The merged object.\n */\nexport const mergeDeep = (target, ...sources) => {\n\tif (!sources.length) return target;\n\tconst source = sources.shift();\n\n\tif (isObject(target) && isObject(source)) {\n\t\tfor (const key in source) {\n\t\t\tif (isObject(source[key])) {\n\t\t\t\tif (!target[key]) Object.assign(target, { [key]: {} });\n\t\t\t\tmergeDeep(target[key], source[key]);\n\t\t\t} else {\n\t\t\t\tObject.assign(target, { [key]: source[key] });\n\t\t\t}\n\t\t}\n\t}\n\treturn mergeDeep(target, ...sources);\n}\n\n/**\n * Resolves the given Promise immediately using setTimeout.\n * @param {Function} resolve - The resolve function of a Promise.\n * @returns {number} The ID value of the timer that is set.\n */\nexport const doneLoading = (resolve) => {\n\treturn setTimeout(resolve, 0);\n}\n\n\n/**\n * Converts a JavaScript object or a JSON-formatted string to a JSON string.\n *\n * @param {Object|string} str - The input string or object to be converted to a JSON string.\n * @returns {string} The JSON string.\n */\nexport const toJSONString = (str) => {\n\tlet JSONString = ''\n\n\tif (typeof str === \"string\") str = str.replace(/[“”]/g,'\"').replace(/[‘’]/g,\"'\");\n\n\tif (isJSON(str)) {\n\t\tJSONString = str\n\t} else {\n\t\tif (typeof str === \"object\") {\n\t\t\tJSONString = JSON.stringify(str, null, 2)\n\t\t} else {\n\t\t\tJSONString = str.trim().replace(/'/g, '\"').charAt(0) === \"{\" ? str.trim().replace(/'/g, '\"') : `{${str.trim().replace(/'/g, '\"')}}`;\n\t\t}\n\t}\n\treturn JSONString;\n}\n\n/**\n * Dynamically loads a stylesheet from the specified URL and calls a callback function when it's loaded.\n *\n * @param {string} url - The URL of the stylesheet to load.\n * @param {Function} callback - A callback function to be called when the stylesheet is loaded.\n */\nexport const loadStyle = (url, callback) => {\n\tconst head = document.querySelector('head');\n\tconst style = document.createElement('link');\n\tstyle.rel = 'stylesheet';\n\tstyle.href = url;\n\tstyle.onload = () => {\n\t\tif (typeof callback === 'function') {\n\t\t\tcallback.call();\n\t\t\tcallback = null;\n\t\t}\n\t};\n\tstyle.onreadystatechange = () => {\n\t\tif (style.readyState === 'loaded') {\n\t\t\tstyle.onload();\n\t\t}\n\t};\n\thead.appendChild(style);\n};\n\n/**\n * Retrieves the path of a JavaScript file based on its filename.\n *\n * @param {string} fileName - The filename of the script.\n * @returns {string} The path to the plugin's location.\n */\nexport const pluginPath = (fileName) => {\n\tlet path;\n\tlet pluginScript = document.querySelector(`script[src$=\"${fileName}\"]`);\n\tif (pluginScript) {\n\t\tpath = pluginScript.getAttribute(\"src\").slice(0, -1 * (fileName.length));\n\t} else {\n\t\tpath = import.meta.url.slice(0, import.meta.url.lastIndexOf('/') + 1);\n\t}\n\treturn path;\n}\n\n\n\nexport const debugLog = (options, text) => {\n\tif (options.debug) console.log(text);\n}\n","import { loadStyle } from '../helpers';\nimport { pluginPath } from '../helpers';\n\n/**\n * Retrieves and loads CSS stylesheets based on the provided options and ES5 filename.\n *\n * @param {Object} options - Configuration options for loading CSS.\n * @param {string} fileName - The filename of the script.\n */\n\nexport const getAndLoadCSS = (options, fileName) => {\n\tlet thePath = pluginPath(fileName);\n\tlet pluginBaseName = fileName.replace(/\\.[^/.]+$/, \"\");\n\n\tlet AppearanceStylePath = options.csspath.appearance ? options.csspath.appearance : null || `${thePath}${pluginBaseName}.css` || `plugin/${pluginBaseName}/${pluginBaseName}.css`\n\tlet AnimateCSSPath = !options.compatibility ? options.animatecsspath.link : options.animatecsspath.compat;\n\n\tif (options.debug) {\n\t\tconsole.log(`Paths:`);\n\t\tconsole.log(`  - Plugin path = ${thePath}`);\n\t\tconsole.log(`  - Appearance CSS path = ${AppearanceStylePath}`);\n\t\tconsole.log(`  - AnimateCSS CSS path = ${AnimateCSSPath}`);\n\t}\n\n\tloadStyle(AnimateCSSPath, function () {\n\t\tloadStyle(AppearanceStylePath);\n\t});\n\n}","import { toJSONString } from '../helpers';\n\n\n/**\n * Adds automatic animations to elements within a section based on specified criteria.\n *\n * This function examines the provided section for attributes and options to determine\n * which classes should be added to its elements to enable automatic animations.\n *\n * @param {HTMLElement} section - The section element to which automatic animations will be applied.\n * @param {Object} options - The existing user options object\n * @param {Object} vars - The existing vars object\n * @returns {undefined}\n */\nexport const addAutoAnimation = (section, options, vars) => {\n\n\tlet sectionAutoSelectors = null;\n\n\tif (section.hasAttribute(\"data-autoappear\")) {\n\n\t\tlet sectDataAppear = section.dataset.autoappear;\n\n\t\tif (sectDataAppear == \"auto\" || sectDataAppear == \"\" || sectDataAppear.length < 1 || sectDataAppear == \"true\") {\n\t\t\t// This section should get the global autoappear classes on its objects\n\t\t\tsectionAutoSelectors = options.autoelements ? options.autoelements : null;\n\t\t} else {\n\t\t\t// This section should get the local autoappear classes on its objects\n\t\t\tsectionAutoSelectors = sectDataAppear;\n\t\t}\n\n\t} else if ( options.autoappear && options.autoelements ) {\n\t\t// This section should get the global autoappear classes on its objects\n\t\tsectionAutoSelectors = options.autoelements;\n\t}\n\n\tif (sectionAutoSelectors) {\n\n\t\tlet elementsToAnimate = JSON.parse(toJSONString(sectionAutoSelectors));\n\n\t\tObject.entries(elementsToAnimate).forEach(([selector, assignables]) => {\n\n\n\t\t\t// Exclude the elements from vars.appearances\n\t\t\tlet elements = Array.from(section.querySelectorAll(selector)).filter( element => !vars.appearances.includes(element) );\n\n\t\t\tif (elements.length) {\n\n\t\t\t\telements.forEach((element) => {\n\n\t\t\t\t\tvars.appearances.push(element)\n\n\t\t\t\t\tlet newClasses = [], newDelay = null, speedClass = false, elementSplit = null, containerDelay = null;\n\n\t\t\t\t\tif (Array.isArray(assignables)) {\n\n\t\t\t\t\t\tnewClasses = assignables[0].split(/[ ,]+/);\n\t\t\t\t\t\tnewDelay = assignables[1];\n\n\t\t\t\t\t} else if (typeof assignables == \"string\"){\n\n\t\t\t\t\t\tnewClasses = assignables.split(/[ ,]+/);\n\n\t\t\t\t\t} else if (assignables.constructor === Object) {\n\n\t\t\t\t\t\tif (assignables.class || assignables.animation) {\n\t\t\t\t\t\t\tlet animationClass = assignables.animation ? assignables.animation : assignables.class;\n\t\t\t\t\t\t\tnewClasses = animationClass.split(/[ ,]+/);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (assignables.speed) {\n\t\t\t\t\t\t\tspeedClass = String(assignables.speed);\n\t\t\t\t\t\t\tif (!speedClass.includes(\"animate__\")) {\n\t\t\t\t\t\t\t\tspeedClass = `animate__${speedClass}`\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (assignables.delay) {\n\t\t\t\t\t\t\tnewDelay = String(assignables.delay);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (assignables.split) {\n\t\t\t\t\t\t\telementSplit = String(assignables.split);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (assignables[\"container-delay\"]) {\n\t\t\t\t\t\t\tcontainerDelay = String(assignables[\"container-delay\"]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\telement.classList.add(...newClasses);\n\t\t\t\t\tif (speedClass) { element.classList.add(speedClass)}\n\t\t\t\t\tif (newDelay) {element.dataset.delay = newDelay};\n\t\t\t\t\tif (elementSplit) {element.dataset.split = elementSplit};\n\t\t\t\t\tif (containerDelay) {element.dataset.containerDelay = containerDelay};\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n}\n","import { copyDataAttributes } from '../helpers';\n\n/**\n * Hoist a list item's appearance to its parent element's appearance.\n *\n * @param {HTMLElement} from - The list item element.\n * @returns {undefined}\n */\nconst hoistAppearance = (from, baseclass) => {\n\tlet to = from.parentNode;\n\tif (!to) return;\n  \n\tfor (const sibling of to.children) {\n\t  if (sibling !== from && sibling.dataset.appearParent) return;\n\t}\n  \n\tto.classList = from.classList;\n\tcopyDataAttributes(from, to, \"data-appear-parent\");\n\tto.innerHTML = from.innerHTML;\n\tto.classList.add(baseclass);\n};\n\n\n/**\n * Fix list items that were changed by Quarto.\n *\n * This function is designed for use with Quarto and handles the conversion of list items\n * with Appearance classes to their parent elements when a manual attribute is present.\n * It also provides automatic conversion for list items that directly contain spans, which\n * is related to Quarto's wrapping of list content in a span.\n *\n * @param {HTMLElement} appearance - The list item element whose appearance will be converted.\n * @param {Object} options - An options object that controls the conversion behavior.\n * @param {boolean} options.appearparents - If `true`, automatic conversion of list items with spans is enabled.\n * @returns {undefined}\n */\nexport const fixListItem = (appearance, options, names) => {\n\n\tlet baseclass = names.baseclass\n\tif (appearance.hasAttribute(\"data-appear-parent\")) {\n\t\thoistAppearance(appearance, baseclass);\n\t}\n\n\tif (options.appearparents) {\n\t\tif (appearance.parentNode && appearance.parentNode.tagName) {\n\t\t\tif (appearance.tagName == \"SPAN\" && appearance.parentNode.tagName == \"LI\") {\n\t\t\t\tlet spanLength = String(appearance.outerHTML).length;\n\t\t\t\tlet liContentLength = String(appearance.parentNode.innerHTML).length;\n\t\t\t\tif (spanLength == liContentLength) {\n\t\t\t\t\thoistAppearance(appearance);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n","/**\n * Adds a base class to an HTML element if it doesn't already have it.\n *\n * This function checks if the specified HTML element has the specified base class,\n * and if not, it adds the base class to the element's class list.\n *\n * @param {HTMLElement} appearance - The HTML element to which the base class should be added.\n * @param {Object} names - The existing 'names' object\n * @returns {undefined}\n */\n\nexport const addBaseClass = (appearance, names) => {\n\tif (!appearance.classList.contains(names.baseclass)) {\n\t\tappearance.classList.add(names.baseclass);\n\t}\n\tif (appearance.classList.contains(names.fragmentClass)) {\n\t\tappearance.classList.add('custom');\n\t}\n}\n","export const addDelay = (appearanceArray, options, names) => {\n\n    let delay = 0;\n    appearanceArray.forEach((appearance, index) => {\n\n        if ((index == 0 && appearance.dataset.delay) || index !=0) {\n\n            let elementDelay = options.delay;\n\n            if (appearance.dataset && appearance.dataset.delay) {\n                elementDelay = parseInt(appearance.dataset.delay);\n            }\n\n            delay = delay + elementDelay;\n\n            appearance.style.setProperty('animation-delay', delay + \"ms\");\n            appearance.removeAttribute('data-delay');\n        }\n\n    })\n\n}\n","/**\n * Selects elements with a specified class that are not nested inside an element with another specified class.\n * @param {string} targetClass - The class name to select elements.\n * @param {string} excludeClass - The class name to exclude elements nested inside it.\n * @param {Element} el - The element to find the target elements in.\n * @returns {Element[]} - Array of selected elements.\n */\nconst elemsNotInClass = (targetClass, excludeClass, el) => \n    Array.from(el.querySelectorAll(`.${targetClass}`))\n        .filter(s => !s.closest(`.${excludeClass}`));\n\n/**\n * Selects elements with a specified class that are nested inside an element with another specified class.\n * @param {string} targetClass - The class name to select elements.\n * @param {string} parentClass - The class name of the parent to find elements in.\n * @param {Element} el - The element to find the target elements in.\n * @returns {Element[]} - Array of selected elements.\n */\nconst elemsInClass = (targetClass, parentClass, el) =>\n    Array.from(el.querySelectorAll(`.${targetClass}`))\n        .filter(s => s.closest(`.${parentClass}`) === el);\n\n/**\n * Extracts groups of elements with a specified class from the provided section element.\n * Groups are formed based on nesting inside elements with another specified class.\n * @param {Element} section - The section to extract data from.\n * @returns {Element[][]} - Nested arrays of selected elements.\n */\n\n\n/**\n * Extracts groups of elements with a specified class from the provided section element.\n * Groups are formed based on nesting inside elements with another specified class.\n * @param {Element} section - The section to extract data from.\n * @param {string} targetClass - The class name to select elements.\n * @param {string} groupClass - The class name of the parent to find elements in.\n * @returns {Element[][]} - Nested arrays of selected elements.\n */\nexport const getAppearanceArrays = (section, targetClass, groupClass) => {\n    const result = [\n        elemsNotInClass(targetClass, groupClass, section), \n        ...Array.from(section.querySelectorAll(`.${groupClass}`))\n            .map(frag => elemsInClass(targetClass, groupClass, frag))\n    ];\n\n\tif (result.some(group => group.length > 0)) {\n        return result;\n    } else {\n\t\treturn false;\n\t}\n};\n","export const convertToSpans = (parent, kind) => {\n\n\tlet splitElements = false;\n\tlet joinChar = ' ';\n\n\tif (kind == \"words\") {\n\t\tsplitElements = parent.textContent.trim().split(/\\s+/);\n\t\t\n\t} else if (kind == \"letters\") {\n\t\tsplitElements = parent.textContent.trim().split('');\n\t\tjoinChar = '';\n\t}\n\n\tif (splitElements) {\n\t\tconst parentAnimateClasses = Array.from(parent.classList).filter(className => className.startsWith('animate__'));\n\t\n\t\tconst newHtml = splitElements.map((element, index) => {\n\t\t\tconst span = document.createElement('span');\n\t\t\tspan.textContent = element;\n\t\t\tif (element == \" \") {span.textContent = \"\\u00A0\"}\n\t\n\t\t\tif (parent.dataset.delay && index !== 0) {\n\t\t\t\tspan.dataset.delay = parent.dataset.delay\n\t\t\t}\n\n\t\t\tif (parent.dataset.containerDelay && index === 0) {\n\t\t\t\tspan.dataset.delay = parent.dataset.containerDelay\n\t\t\t}\n\t\n\t\t\tparent.classList.forEach(className => className.startsWith('animate__') && span.classList.add(className));\n\t\t\treturn span.outerHTML;\n\t\t\t\n\t\t}).join(joinChar);\n\t\n\t\tparentAnimateClasses.forEach(className => parent.classList.remove(className));\n\t\tparent.removeAttribute('data-delay');\n\t\tparent.removeAttribute('data-split');\n\t\tparent.removeAttribute('data-container-delay');\n\t\n\t\tparent.innerHTML = newHtml;\n\t}\n\n\n};","/**\n * Derives slide from and to from the event object.\n *\n * @param {Object} event - The event object containing slide transition details.\n * @returns {Object} - An object containing references to the \"from\" and \"to\" slides.\n */\nconst fromTo = (event) => {\n\tlet slides = {};\n\tslides.from = event.fromSlide || event.previousSlide || null;\n\tslides.to = event.toSlide || event.currentSlide || null;\n\treturn slides;\n};\n\n/**\n * A function that determines the appearance event for a given slide.\n *\n * This function checks the `data-appearevent` attribute of the slide and the `options.appearevent` parameter.\n * If `data-appearevent` is set to \"auto\", it is converted to \"autoanimate\". If `options.appearevent` is \"auto\", it is also converted to \"autoanimate\".\n * The function returns the appearance event, prioritizing `data-appearevent` over `options.appearevent`.\n *\n * @param {HTMLElement} toSlide - The slide for which the appearance event is determined.\n * @param {Object} options - An object containing options for the appearance event.\n * @param {string} options.appearevent - The appearance event option provided in the `options` object.\n *\n * @returns {string} - The determined appearance event for the slide, either from `data-appearevent` or `options.appearevent`.\n */\nconst slideAppearevent = (toSlide, options) => {\n\n\tif (toSlide.dataset.appearevent && toSlide.dataset.appearevent === \"auto\" ) {\n\t\ttoSlide.dataset.appearevent = \"autoanimate\"\n\t}\n\tif (options.appearevent == \"auto\") {options.appearevent = \"autoanimate\"}\n\treturn toSlide.dataset.appearevent ? toSlide.dataset.appearevent : options.appearevent;\n};\n\n/**\n * Remove the 'data-appearance-can-start' attribute from the 'from' slide if the 'hideagain' option is enabled.\n *\n * @param {HTMLElement} slides - The container element for the slides.\n * @param {Object} options - An object containing configuration options.\n * @param {boolean} options.hideagain - A flag indicating whether to remove the attribute when 'hideagain' is true.\n */\nconst removeStartAttribute = (slides, options) => {\n\tif (options.hideagain) {\n\t\tif (slides.from && slides.from.dataset.appearanceCanStart ) {\n\t\t\tslides.from.removeAttribute('data-appearance-can-start');\n\t\t}\n\t}\n};\n\n\n/**\n * Turn off slide appearances when transitioning from one slide to another if the 'hideagain' option is enabled.\n *\n * @param {HTMLElement} slides - The container element for the slides.\n * @param {Object} options - An object containing configuration options.\n * @param {string} names.animatecss - The CSS selector for animated elements.\n */\nconst turnOffSlideAppearances = (slides, options, names) => {\n\tif (options.hideagain) {\n\t\tlet fromAppearances = slides.from.querySelectorAll(names.animatecss);\n\t\tfromAppearances.forEach( appearance => {\n\t\t\tappearance.classList.remove('animationended');\n\t\t} );\n\t\t// Remove visible class from fragments when moving away from that slide\n\t\tlet fromFragments = slides.from.querySelectorAll(`.fragment.visible`);\n\t\tif (fromFragments) {\n\t\t\tfromFragments.forEach(fragment => {\n\t\t\t\tfragment.classList.remove('visible');\n\t\t\t})\n\t\t}\n\t}\n};\n\n\n/**\n * Handles the showing and hiding of slides based on the provided event and options.\n *\n * @param {Object} event - The event object containing slide transition details.\n * @param {Object} options - An object containing configurations for slide appearance management.\n */\nexport const showHideSlide = (event, options, names, vars) => {\n\n\tlet view = vars.deck.getConfig().view;\n\tlet etype = event.type;\n\tlet slides = fromTo(event);\n\n\tif (slides.to) {\n\n\t\tif (etype == \"ready\") {\n\t\t\tslides.to.dataset.appearanceCanStart = true;\n\t\t}\n\n\t\tlet appearevent = slideAppearevent(slides.to, options)\n\n\t\tif (etype == appearevent || (etype == \"slidetransitionend\" && appearevent == \"autoanimate\")) {\n\t\t\tslides.to.dataset.appearanceCanStart = true;\n\t\t}\n\n\t\t// Add experimental Reader mode compatibility, does not have a slidetransitionend event yet\n\t\tif (view == \"scroll\" && etype == 'slidechanged' ) {\n\n\t\t\tremoveStartAttribute(slides, options);\n\t\t\tturnOffSlideAppearances(slides, options, names);\n\n\t\t\t// Add delay to allow for scroll animation to finish\n\t\t\tsetTimeout(() => {\n\t\t\t\tslides.to.dataset.appearanceCanStart = true;\n\t\t\t}, options.delay)\n\t\t}\n\n\n\t\tif (etype == \"slidetransitionend\" ) {\n\n\t\t\tremoveStartAttribute(slides, options);\n\t\t\tturnOffSlideAppearances(slides, options, names);\n\t\t}\n\t\t\n\t\tif (etype == 'slidechanged' && document.body.dataset.exitoverview) {\n\t\t\tremoveStartAttribute(slides, options);\n\t\t\tslides.to.dataset.appearanceCanStart = true;\n\n\t\t} else if (etype == 'overviewhidden' ) {\n\n\t\t\tdocument.body.dataset.exitoverview = true;\n\n\t\t\tsetTimeout(() => {\n\t\t\t\tdocument.body.removeAttribute('data-exitoverview')\n\t\t\t}, 500)\n\n\t\t\tif (event.currentSlide ) {\n\t\t\t\tremoveStartAttribute(slides, options);\n\t\t\t\tslides.to.dataset.appearanceCanStart = true;\n\t\t\t}\n\t\t}\n\t}\n}","import { debugLog, mergeDeep, doneLoading, isStack } from './helpers';\n\nimport {getAndLoadCSS} from './functions/get-load-css.js';\nimport {addAutoAnimation} from './functions/add-auto-animation.js';\nimport {fixListItem} from './functions/fix-list-item';\nimport {addBaseClass} from './functions/add-base-class.js';\nimport {addDelay} from './functions/add-delay.js';\nimport {getAppearanceArrays} from './functions/get-appearance-arrays.js';\nimport {convertToSpans} from './functions/convert-to-spans';\nimport {showHideSlide} from './functions/show-hide-slide.js';\n\n\nconst Plugin = () => {\n\n\tconst vars = {};\n\tvars.names = {};\n\tlet options = {};\n\n\t/**\n\t* Prepare the plugin to find Appearance elements\n\t* @param {Object} vars - The variables to be prepared.\n\t* @param {Object} names - The names to be prepared.\n\t* @param {Function} resolve - The callback function to be called when preparation is complete.\n\t* @throws {Error} Throws an error if the 'options' object is not defined.\n\t*/\n\tconst prepare = (options, vars, resolve) => {\n\n\t\tdebugLog(options, \"-------------   Preloading   -------------\");\n\n\t\tlet names = vars.names;\n\n\t\tgetAndLoadCSS(options, names.es5Filename);\n\n\t\tif (options.compatibility) {\n\t\t\tnames.animatecss = '.backInDown, .backInLeft, .backInRight, .backInUp, .bounceIn, .bounceInDown, .bounceInLeft, .bounceInRight, .bounceInUp, .fadeIn, .fadeInDown, .fadeInDownBig, .fadeInLeft, .fadeInLeftBig, .fadeInRight, .fadeInRightBig, .fadeInUp, .fadeInUpBig, .fadeInTopLeft, .fadeInTopRight, .fadeInBottomLeft, .fadeInBottomRight, .flipInX, .flipInY, .lightSpeedInRight, .lightSpeedInLeft, .rotateIn, .rotateInDownLeft, .rotateInDownRight, .rotateInUpLeft, .rotateInUpRight, .jackInTheBox, .rollIn, .zoomIn, .zoomInDown, .zoomInLeft, .zoomInRight, .zoomInUp, .slideInDown, .slideInLeft, .slideInRight, .slideInUp, .skidLeft, .skidLeftBig, .skidRight, .skidRightBig, .shrinkIn, .shrinkInBlur';\n\t\t\tnames.baseclass = options.compatibilitybaseclass\n\t\t}\n\n\t\tvars.appearances = Array.from(vars.slides.querySelectorAll(names.animatecss));\n\n\t\t// Go through each section to see if there are any (auto) selectors that need animation classes\n\t\tvars.regularSections.forEach(theSection => addAutoAnimation(theSection, options, vars));\n\n\t\tvars.appearances.forEach((theAppearance, index) => {\n\t\t\t// Fix any list item where the Appearance classes were moved to the span (Quarto does this)\n\t\t\tfixListItem(theAppearance, options, names);\n\n\t\t\t// Go through each appearance element and add the baseclass if it doesn't have it\n\t\t\taddBaseClass(theAppearance, names);\n\n\t\t\tif (theAppearance.hasAttribute('data-split')) {\n\t\t\t\tconvertToSpans(theAppearance, theAppearance.dataset.split);\n\t\t\t}\n\t\t});\n\n\t\tvars.regularSections.forEach((theSection, index) => {\n\t\t\t// Get all the Appearances in the section as separate arrays per delay loop\n\t\t\tlet appearanceArrays = getAppearanceArrays(theSection, names.baseclass, names.fragmentClass);\n\n\t\t\tif (appearanceArrays) {\n\t\t\t\tappearanceArrays.forEach((appearanceArray) => {\n\t\t\t\t\t// Add the delays to each appearance in the array\n\t\t\t\t\taddDelay(appearanceArray, options, names)\n\t\t\t\t})\n\t\t\t}\n\t\t});\n\n\t\tdoneLoading(resolve);\n\t}\n\n\t/**\n\t* The main function of the plugin\n\t* @param {object} deck - The deck object\n\t* @param {object} options - The options object\n\t* @param {string} es5Filename - The name of the file that will be used\n\t*/\n\tconst Appear = function (deck, options, es5Filename) {\n\n\t\tlet names = vars.names;\n\n\t\t// Set up names\n\t\tnames.baseclass = options.baseclass;\n\t\tnames.compatibilitybaseclass = options.compatibilitybaseclass;\n\t\tnames.fragmentSelector = \".fragment\";\n\t\tnames.fragmentClass = \"fragment\";\n\t\tnames.speedClasses = ['slower', 'slow', 'fast', 'faster'];\n\t\tnames.speedClasses.push(...names.speedClasses.map(speed => `animate__${speed}`));\n\t\tnames.animatecss = '[class^=\"animate__\"],[class*=\" animate__\"]';\n\t\tnames.es5Filename = es5Filename;\n\t\tnames.eventnames = ['ready', 'slidechanged', 'slidetransitionend', 'autoanimate', 'overviewhidden', 'scrolle'];\n\t\n\t\t// Set up variables\n\t\tvars.deck = deck;\n\t\tvars.dom = deck.getRevealElement();\n\t\tvars.viewport = deck.getViewportElement();\n\t\tvars.slides = deck.getSlidesElement();\n\n\t\tvars.sections = vars.slides.querySelectorAll('section');\n\t\tvars.fragments = vars.slides.querySelectorAll(names.fragmentSelector);\n\t\tvars.regularSections = Array.from(vars.sections).filter( section => !isStack(section));\n\n\t\tif( /receiver/i.test( window.location.search ) ) vars.viewport.classList.add('sv');\n\n\t\tnames.eventnames.forEach( (eventname) => deck.on( eventname, event => { showHideSlide(event, options, names, vars) } ) );\n\n\t\tvars.viewport.addEventListener(\"animationend\", (event) => {\n\t\t\tevent.target.classList.add('animationended');\n\t\t});\n\t\tvars.viewport.addEventListener(\"fragmenthidden\", (event) => {\n\t\t\tevent.fragment.classList.remove('animationended');\n\t\t\tevent.fragment.querySelectorAll('.animationended').forEach(el => {\n\t\t\t\tel.classList.remove('animationended');\n\t\t\t});\n\t\t});\n\n\t\treturn new Promise(resolve => {\n\t\t\tprepare(options, vars, resolve);\n\t\t\tdebugLog(options, \"----------   Done preloading   ----------\");\n\t\t});\n\t};\n\n\n\t/**\n\t* Initialize the plugin\n\t* @param {object} deck - The deck object\n\t*/\n\tconst init = function (deck) {\n\n\t\tlet defaultOptions = {\n\t\t\tbaseclass: 'animate__animated',\n\t\t\thideagain: true,\n\t\t\tdelay: 300,\n\t\t\tdebug: false,\n\t\t\tappearevent: 'slidetransitionend',\n\t\t\tautoappear: false,\n\t\t\tautoelements: false,\n\t\t\tappearparents: false,\n\t\t\tcsspath: '',\n\t\t\tanimatecsspath: {\n\t\t\t\tlink : 'https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css',\n\t\t\t\tcompat : 'https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.compat.css',\n\t\t\t},\n\t\t\tcompatibility: false,\n\t\t\tcompatibilitybaseclass: 'animated'\n\t\t};\n\n\t\toptions = mergeDeep(defaultOptions, deck.getConfig().appearance || {});\n\n\t\treturn Appear(deck, options, \"appearance.js\");\n\t};\n\n\treturn { id: 'appearance', init: init };\n};\n\nexport default Plugin;"],"names":["isJSON","str","JSON","parse","e","isStack","_ref","childNodes","i","length","tagName","copyDataAttributes","_ref2","target","not","attributes","filter","_ref3","nodeName","includes","forEach","_ref4","nodeValue","setAttribute","isObject","item","Array","isArray","mergeDeep","_len","arguments","sources","_key","source","shift","key","Object","assign","doneLoading","resolve","setTimeout","toJSONString","JSONString","replace","stringify","trim","charAt","loadStyle","url","callback","head","document","querySelector","style","createElement","rel","href","onload","call","onreadystatechange","readyState","appendChild","pluginPath","fileName","path","pluginScript","getAttribute","slice","import","lastIndexOf","debugLog","options","text","debug","console","log","getAndLoadCSS","thePath","pluginBaseName","AppearanceStylePath","csspath","appearance","AnimateCSSPath","compatibility","animatecsspath","link","compat","addAutoAnimation","section","vars","sectionAutoSelectors","hasAttribute","sectDataAppear","dataset","autoappear","autoelements","elementsToAnimate","entries","selector","assignables","elements","from","querySelectorAll","element","appearances","push","newClasses","newDelay","speedClass","elementSplit","containerDelay","split","constructor","class","animation","animationClass","speed","String","delay","classList","add","hoistAppearance","baseclass","to","parentNode","sibling","children","appearParent","innerHTML","fixListItem","names","appearparents","spanLength","outerHTML","liContentLength","addBaseClass","contains","fragmentClass","addDelay","appearanceArray","index","elementDelay","parseInt","setProperty","removeAttribute","elemsNotInClass","targetClass","excludeClass","el","s","closest","elemsInClass","parentClass","getAppearanceArrays","groupClass","result","map","frag","some","group","convertToSpans","parent","kind","splitElements","joinChar","textContent","parentAnimateClasses","className","startsWith","newHtml","span","join","remove","fromTo","event","slides","fromSlide","previousSlide","toSlide","currentSlide","slideAppearevent","appearevent","removeStartAttribute","hideagain","appearanceCanStart","turnOffSlideAppearances","fromAppearances","animatecss","fromFragments","fragment","showHideSlide","view","deck","getConfig","etype","type","body","exitoverview","Plugin","prepare","es5Filename","compatibilitybaseclass","regularSections","theSection","theAppearance","appearanceArrays","Appear","fragmentSelector","speedClasses","eventnames","dom","getRevealElement","viewport","getViewportElement","getSlidesElement","sections","fragments","test","window","location","search","eventname","on","addEventListener","Promise","init","defaultOptions","id"],"mappings":"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"}