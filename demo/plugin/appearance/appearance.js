(function(d,h){typeof exports=="object"&&typeof module<"u"?module.exports=h():typeof define=="function"&&define.amd?define(h):(d=typeof globalThis<"u"?globalThis:d||self,d.Appearance=h())})(this,function(){"use strict";var Ae=Object.defineProperty;var Le=(d,h,I)=>h in d?Ae(d,h,{enumerable:!0,configurable:!0,writable:!0,value:I}):d[h]=I;var b=(d,h,I)=>Le(d,typeof h!="symbol"?h+"":h,I);var d=typeof document<"u"?document.currentScript:null;const h={baseclass:"animate__animated",hideagain:!0,delay:300,appearevent:"slidetransitionend",autoappear:!1,autoelements:!1,appearparents:!1,cssautoload:!0,csspath:"",compatibility:!1,compatibilitybaseclass:"animated"};function I(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var M,N;function x(){if(N)return M;N=1;var t=function(l){return e(l)&&!n(l)};function e(r){return!!r&&typeof r=="object"}function n(r){var l=Object.prototype.toString.call(r);return l==="[object RegExp]"||l==="[object Date]"||u(r)}var i=typeof Symbol=="function"&&Symbol.for,a=i?Symbol.for("react.element"):60103;function u(r){return r.$$typeof===a}function o(r){return Array.isArray(r)?[]:{}}function c(r,l){return l.clone!==!1&&l.isMergeableObject(r)?L(o(r),r,l):r}function s(r,l,f){return r.concat(l).map(function(y){return c(y,f)})}function p(r,l){if(!l.customMerge)return L;var f=l.customMerge(r);return typeof f=="function"?f:L}function S(r){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(r).filter(function(l){return Object.propertyIsEnumerable.call(r,l)}):[]}function v(r){return Object.keys(r).concat(S(r))}function A(r,l){try{return l in r}catch{return!1}}function w(r,l){return A(r,l)&&!(Object.hasOwnProperty.call(r,l)&&Object.propertyIsEnumerable.call(r,l))}function D(r,l,f){var y={};return f.isMergeableObject(r)&&v(r).forEach(function(m){y[m]=c(r[m],f)}),v(l).forEach(function(m){w(r,m)||(A(r,m)&&f.isMergeableObject(l[m])?y[m]=p(m,f)(r[m],l[m],f):y[m]=c(l[m],f))}),y}function L(r,l,f){f=f||{},f.arrayMerge=f.arrayMerge||s,f.isMergeableObject=f.isMergeableObject||t,f.cloneUnlessOtherwiseSpecified=c;var y=Array.isArray(l),m=Array.isArray(r),Ce=y===m;return Ce?y?f.arrayMerge(r,l,f):D(r,l,f):c(l,f)}L.all=function(l,f){if(!Array.isArray(l))throw new Error("first argument should be an array");return l.reduce(function(y,m){return L(y,m,f)},{})};var Ie=L;return M=Ie,M}var z=x();const F=I(z);var V=Object.defineProperty,k=(t,e,n)=>e in t?V(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,g=(t,e,n)=>k(t,typeof e!="symbol"?e+"":e,n);const J=()=>{const t=typeof window<"u",e=typeof document<"u",n=t&&typeof location<"u"&&/localhost|127\.0\.0\.1/.test(location.hostname);let i=!1;try{i=new Function('return typeof module !== "undefined" && !!module.hot')()}catch{}let a=!1;try{a=new Function('return typeof import.meta !== "undefined" && typeof import.meta.env !== "undefined" && import.meta.env.DEV === true')()}catch{}const u=t&&typeof navigator<"u"&&/vite|localhost|127\.0\.0\.1/.test(location.origin)&&/AppleWebKit|Chrome|Vite/.test(navigator.userAgent),o=e&&!!document.querySelector('script[type="module"]');let c=!1;try{c=new Function('return typeof process !== "undefined" && process.env && (process.env.ROLLUP_WATCH === "true" || process.env.NODE_ENV === "development")')()}catch{}let s=!1;try{s=new Function('return typeof define === "function" && !!define.amd')()}catch{}return{isDevServer:n,isWebpackHMR:i,isVite:a,isVitePreview:u,hasModuleScripts:o,isModuleBundler:c,isAMD:s,isBundlerEnvironment:i||a||u||o||c||s||n}};class W{constructor(e,n,i){g(this,"defaultConfig"),g(this,"pluginInit"),g(this,"pluginId"),g(this,"mergedConfig",null),g(this,"userConfigData",null),g(this,"data",{}),g(this,"getEnvironmentInfo",()=>J()),typeof e=="string"?(this.pluginId=e,this.pluginInit=n,this.defaultConfig=i||{}):(this.pluginId=e.id,this.pluginInit=e.init,this.defaultConfig=e.defaultConfig||{})}initializeConfig(e){const n=this.defaultConfig,i=e.getConfig()[this.pluginId]||{};this.userConfigData=i,this.mergedConfig=F(n,i,{arrayMerge:(a,u)=>u,clone:!0})}getCurrentConfig(){if(!this.mergedConfig)throw new Error("Plugin configuration has not been initialized");return this.mergedConfig}getData(){return Object.keys(this.data).length>0?this.data:void 0}get userConfig(){return this.userConfigData||{}}init(e){if(this.initializeConfig(e),this.pluginInit)return this.pluginInit(this,e,this.getCurrentConfig())}createInterface(e={}){return{id:this.pluginId,init:n=>this.init(n),getConfig:()=>this.getCurrentConfig(),getData:()=>this.getData(),...e}}}const G=t=>{const e=document.querySelector(`script[src$="${t}.js"], script[src$="${t}.min.js"], script[src$="${t}.mjs"]`);if(e!=null&&e.src){const n=e.getAttribute("src")||"",i=n.lastIndexOf("/");if(i!==-1)return n.substring(0,i+1)}try{if(typeof{url:typeof document>"u"&&typeof location>"u"?require("url").pathToFileURL(__filename).href:typeof document>"u"?location.href:d&&d.tagName.toUpperCase()==="SCRIPT"&&d.src||new URL("plugin/appearance/appearance.js",document.baseURI).href}<"u"&&(typeof document>"u"&&typeof location>"u"?require("url").pathToFileURL(__filename).href:typeof document>"u"?location.href:d&&d.tagName.toUpperCase()==="SCRIPT"&&d.src||new URL("plugin/appearance/appearance.js",document.baseURI).href))return(typeof document>"u"&&typeof location>"u"?require("url").pathToFileURL(__filename).href:typeof document>"u"?location.href:d&&d.tagName.toUpperCase()==="SCRIPT"&&d.src||new URL("plugin/appearance/appearance.js",document.baseURI).href).slice(0,(typeof document>"u"&&typeof location>"u"?require("url").pathToFileURL(__filename).href:typeof document>"u"?location.href:d&&d.tagName.toUpperCase()==="SCRIPT"&&d.src||new URL("plugin/appearance/appearance.js",document.baseURI).href).lastIndexOf("/")+1)}catch{}return`plugin/${t}/`},R="data-css-id",K=(t,e)=>new Promise((n,i)=>{const a=document.createElement("link");a.rel="stylesheet",a.href=e,a.setAttribute(R,t);const u=setTimeout(()=>{a.parentNode&&a.parentNode.removeChild(a),i(new Error(`[${t}] Timeout loading CSS from: ${e}`))},5e3);a.onload=()=>{clearTimeout(u),n()},a.onerror=()=>{clearTimeout(u),a.parentNode&&a.parentNode.removeChild(a),i(new Error(`[${t}] Failed to load CSS from: ${e}`))},document.head.appendChild(a)}),_=t=>document.querySelectorAll(`[${R}="${t}"]`).length>0,Y=t=>new Promise(e=>{if(n())return e(!0);setTimeout(()=>{e(n())},50);function n(){if(_(t))return!0;try{return window.getComputedStyle(document.documentElement).getPropertyValue(`--cssimported-${t}`).trim()!==""}catch{return!1}}}),U=async t=>{const{id:e,cssautoload:n=!0,csspath:i="",debug:a=!1}=t;if(n===!1||i===!1)return;if(_(e)){a&&console.log(`[${e}] CSS already loaded, skipping`);return}const u=[];typeof i=="string"&&i.trim()!==""&&u.push(i);const o=G(e);if(o){const s=`${o}${e}.css`;u.push(s)}const c=`plugin/${e}/${e}.css`;u.push(c);for(const s of u)try{await K(e,s);let p="CSS";i&&s===i?p="user-specified CSS":o&&s===`${o}${e}.css`?p="CSS (auto-detected from script location)":p="CSS (standard fallback)",a&&console.log(`[${e}] ${p} loaded successfully from: ${s}`);return}catch{a&&console.log(`[${e}] Failed to load CSS from: ${s}`)}console.warn(`[${e}] Could not load CSS from any location`)};async function X(t,e){if("getEnvironmentInfo"in t&&e){const n=t,i=n.getEnvironmentInfo();if(await Y(n.pluginId)){e.debug&&console.log(`[${n.pluginId}] CSS already imported, skipping`);return}if("cssautoload"in n.userConfig?e.cssautoload:!i.isBundlerEnvironment)return U({id:n.pluginId,cssautoload:!0,csspath:e.csspath,debug:e.debug});i.isBundlerEnvironment&&console.warn(`[${n.pluginId}] CSS autoloading is disabled in bundler environments. Please import the CSS manually, using import.`);return}return U(t)}class Z{constructor(){g(this,"debugMode",!1),g(this,"label","DEBUG"),g(this,"groupDepth",0),g(this,"group",(...e)=>{this.debugLog("group",...e),this.groupDepth++}),g(this,"groupCollapsed",(...e)=>{this.debugLog("groupCollapsed",...e),this.groupDepth++}),g(this,"groupEnd",()=>{this.groupDepth>0&&(this.groupDepth--,this.debugLog("groupEnd"))}),g(this,"error",(...e)=>{const n=this.debugMode;this.debugMode=!0,this.formatAndLog(console.error,e),this.debugMode=n}),g(this,"table",(e,n,i)=>{if(this.debugMode)try{typeof e=="string"&&n!==void 0&&typeof n!="string"?(this.groupDepth===0?console.log(`[${this.label}]: ${e}`):console.log(e),i?console.table(n,i):console.table(n)):(this.groupDepth===0&&console.log(`[${this.label}]: Table data`),typeof n=="object"&&Array.isArray(n)?console.table(e,n):console.table(e))}catch(a){console.error(`[${this.label}]: Error showing table:`,a),console.log(`[${this.label}]: Raw data:`,e)}}),g(this,"formatAndLog",(e,n)=>{if(this.debugMode)try{this.groupDepth>0?e.call(console,...n):n.length>0&&typeof n[0]=="string"?e.call(console,`[${this.label}]: ${n[0]}`,...n.slice(1)):e.call(console,`[${this.label}]:`,...n)}catch(i){console.error(`[${this.label}]: Error in logging:`,i),console.log(`[${this.label}]: Original log data:`,...n)}})}initialize(e,n="DEBUG"){this.debugMode=e,this.label=n}debugLog(e,...n){const i=console[e];if(!this.debugMode&&e!=="error"||typeof i!="function")return;const a=i;if(e==="group"||e==="groupCollapsed"){n.length>0&&typeof n[0]=="string"?a.call(console,`[${this.label}]: ${n[0]}`,...n.slice(1)):a.call(console,`[${this.label}]:`,...n);return}if(e==="groupEnd"){a.call(console);return}if(e==="table"){n.length===1?this.table(n[0]):n.length===2?typeof n[0]=="string"?this.table(n[0],n[1]):this.table(n[0],n[1]):n.length>=3&&this.table(n[0],n[1],n[2]);return}this.groupDepth>0?a.call(console,...n):n.length>0&&typeof n[0]=="string"?a.call(console,`[${this.label}]: ${n[0]}`,...n.slice(1)):a.call(console,`[${this.label}]:`,...n)}}const Q=t=>new Proxy(t,{get:(e,n)=>{if(n in e)return e[n];const i=n.toString();if(typeof console[i]=="function")return(...a)=>{e.debugLog(i,...a)}}}),E=Q(new Z);var P=(t=>(t.HORIZONTAL="horizontal",t.STACK="stack",t.VERTICAL="vertical",t.INVALID="invalid",t))(P||{});const C=t=>t instanceof HTMLElement&&t.tagName==="SECTION",$=t=>C(t)?Array.from(t.children).some(e=>e instanceof HTMLElement&&e.tagName==="SECTION"):!1,T=t=>C(t)?t.parentElement instanceof HTMLElement&&t.parentElement.tagName==="SECTION":!1,ee=t=>C(t)&&!T(t)&&!$(t),te=t=>{if(!C(t))return null;if(T(t)){const e=t.parentElement;if(e instanceof HTMLElement&&$(e))return e}return null},ne=t=>C(t)?T(t)?"vertical":$(t)?"stack":"horizontal":"invalid",ie=Object.freeze(Object.defineProperty({__proto__:null,SectionType:P,getSectionType:ne,getStack:te,isHorizontal:ee,isSection:C,isStack:$,isVertical:T},Symbol.toStringTag,{value:"Module"}));function ae(t,e,n){const i={baseclass:t,compatibilitybaseclass:e,fragmentSelector:".fragment",fragmentClass:"fragment",speedClasses:["slower","slow","fast","faster"],animatecss:'[class^="animate__"],[class*=" animate__"]',eventnames:["ready","slidechanged","slidetransitionend","autoanimate","overviewhidden"]};return i.speedClasses=[...i.speedClasses,...i.speedClasses.map(a=>`animate__${a}`)],n&&(i.animatecss=".backInDown, .backInLeft, .backInRight, .backInUp, .bounceIn, .bounceInDown, .bounceInLeft, .bounceInRight, .bounceInUp, .fadeIn, .fadeInDown, .fadeInDownBig, .fadeInLeft, .fadeInLeftBig, .fadeInRight, .fadeInRightBig, .fadeInUp, .fadeInUpBig, .fadeInTopLeft, .fadeInTopRight, .fadeInBottomLeft, .fadeInBottomRight, .flipInX, .flipInY, .lightSpeedInRight, .lightSpeedInLeft, .rotateIn, .rotateInDownLeft, .rotateInDownRight, .rotateInUpLeft, .rotateInUpRight, .jackInTheBox, .rollIn, .zoomIn, .zoomInDown, .zoomInLeft, .zoomInRight, .zoomInUp, .slideInDown, .slideInLeft, .slideInRight, .slideInUp, .skidLeft, .skidLeftBig, .skidRight, .skidRightBig, .shrinkIn, .shrinkInBlur",i.baseclass=e),i}const re=t=>{try{return JSON.parse(t)&&!!t}catch{return!1}},se=t=>{if(t==null)return"";let e="",n=t;return typeof n=="string"&&(n=n.replace(/[“”]/g,'"').replace(/[‘’]/g,"'")),re(t)?e=t:typeof t=="object"?e=JSON.stringify(t,null,2):typeof t=="string"&&(e=t.trim().replace(/'/g,'"').charAt(0)==="{"?t.trim().replace(/'/g,'"'):`{${t.trim().replace(/'/g,'"')}}`),e},oe=(t,e,n)=>{for(const i of Array.from(t.attributes))i.nodeName.startsWith("data")&&i.nodeName!==n&&e.setAttribute(i.nodeName,i.nodeValue||"")},le=t=>typeof t=="object"&&t!==null,ce=(t,e,n)=>{let i=null;if(t instanceof HTMLElement&&t.hasAttribute("data-autoappear")){const a=t.dataset.autoappear;if(a==="auto"||a===""||a==="true")i=e.autoelements&&typeof e.autoelements=="object"?e.autoelements:null;else try{i=a?JSON.parse(a):null}catch(o){E.log(e,`Error parsing data-autoappear: ${o}`),i=null}}else e.autoappear&&e.autoelements&&typeof e.autoelements=="object"&&(i=e.autoelements);if(i)try{const a=JSON.parse(se(i));for(const[u,o]of Object.entries(a)){const c=Array.from(t.querySelectorAll(u)).filter(s=>!n.includes(s));if(c.length!==0)for(const s of c){n.push(s);let p=[],S=null,v=!1,A=null,w=null;if(Array.isArray(o))p=String(o[0]).split(/[ ,]+/),S=o[1]!==void 0?String(o[1]):null;else if(typeof o=="string")p=o.split(/[ ,]+/);else if(le(o)){if(o.class||o.animation){const D=o.animation||o.class;p=String(D).split(/[ ,]+/)}o.speed&&(v=String(o.speed),v.includes("animate__")||(v=`animate__${v}`)),o.delay!==void 0&&(S=String(o.delay)),o.split!==void 0&&(A=String(o.split)),o["container-delay"]!==void 0&&(w=String(o["container-delay"]))}p.length>0&&s.classList.add(...p),v&&s.classList.add(v),s instanceof HTMLElement&&(S&&!s.dataset.delay&&(s.dataset.delay=S),A&&(s.dataset.split=A),w&&(s.dataset.containerDelay=w))}}}catch(a){E.log(e,`Error processing auto animations: ${a}`)}};function ue(t,e){t.classList.contains(e.baseclass)||t.classList.add(e.baseclass),t.classList.contains(e.fragmentClass)&&t.classList.add("custom")}function H(t,e){const n=t.parentNode;if(n){for(const i of Array.from(n.children))if(i!==t&&i.dataset.appearParent)return;n instanceof Element&&(n.classList.value=t.classList.value,oe(t,n,"data-appear-parent"),n.innerHTML=t.innerHTML,e&&n.classList.add(e))}}function fe(t,e,n){const i=n.baseclass;if(t.hasAttribute("data-appear-parent")&&H(t,i),e.appearparents&&t.parentNode&&t.parentNode instanceof Element&&t.tagName==="SPAN"&&t.parentNode.tagName==="LI"){const a=t.outerHTML.length,u=t.parentNode.innerHTML.length;a===u&&H(t)}}function de(t,e){var a;let n=!1,i=" ";if((a=t.textContent)!=null&&a.trim()&&(e==="words"?n=t.textContent.trim().split(/\s+/)||[]:e==="letters"&&(n=t.textContent.trim().split("")||[],i=""),n&&n.length>0)){const u=Array.from(t.classList).filter(c=>c.startsWith("animate__")),o=n.map((c,s)=>{const p=document.createElement("span");p.textContent=c===" "?" ":c,t.dataset.delay&&s!==0&&(p.dataset.delay=t.dataset.delay),t.dataset.containerDelay&&s===0&&(p.dataset.delay=t.dataset.containerDelay);for(let S=0;S<u.length;S++)p.classList.add(u[S]);return p.outerHTML}).join(i);t.classList.add("wordchargroup");for(let c=0;c<u.length;c++)t.classList.remove(u[c]);t.removeAttribute("data-delay"),t.removeAttribute("data-split"),t.removeAttribute("data-container-delay"),t.innerHTML=o}}const pe=(t,e,n)=>Array.from(n.querySelectorAll(`.${t}`)).filter(i=>!i.closest(`.${e}`)),ge=(t,e,n)=>Array.from(n.querySelectorAll(`.${t}`)).filter(i=>i.closest(`.${e}`)===n),me=(t,e,n)=>{if(!e)return!1;const i=[pe(e,n,t),...Array.from(t.querySelectorAll(`.${n}`)).map(a=>ge(e,n,a))];return i.some(a=>a.length>0)?i:!1};function he(t,e,n){let i=0;t.forEach((a,u)=>{if(u===0&&a instanceof HTMLElement&&a.dataset.delay||u!==0){let o=e.delay;if(a instanceof HTMLElement&&a.dataset&&a.dataset.delay){const c=Number.parseInt(a.dataset.delay);Number.isNaN(c)||(o=c)}i=i+o,a instanceof HTMLElement&&(a.style.setProperty("animation-delay",`${i}ms`),a.removeAttribute("data-delay"))}})}function ye(t){return{from:t.fromSlide||t.previousSlide||null,to:t.toSlide||t.currentSlide||null}}function be(t,e){t.dataset.appearevent&&t.dataset.appearevent==="auto"&&(t.dataset.appearevent="autoanimate");let n=e.appearevent;return n==="auto"&&(n="autoanimate"),t.dataset.appearevent||n}function O(t,e){e.hideagain&&t.from&&t.from.dataset.appearanceCanStart&&t.from.removeAttribute("data-appearance-can-start")}function q(t,e,n){if(e.hideagain&&t&&t.from){const i=t.from.querySelectorAll(n.animatecss);if(i)for(const u of i)u.classList.remove("animationended");const a=t.from.querySelectorAll(".fragment.visible");if(a)for(const u of a)u.classList.remove("animationended")}}function Se(t,e,n,i){const a=i.getViewportElement();i.getConfig().view;const o=a.classList.contains("reveal-scroll"),c=t.type,s=ye(t);if(s.to){c==="ready"&&(s.to.dataset.appearanceCanStart="true");const p=be(s.to,e);(c===p||c==="slidetransitionend"&&p==="autoanimate")&&(s.to.dataset.appearanceCanStart="true"),o&&c==="slidechanged"&&(O(s,e),q(s,e,n),setTimeout(()=>{s.to&&(s.to.dataset.appearanceCanStart="true")},e.delay)),c==="slidetransitionend"&&(O(s,e),q(s,e,n)),c==="slidechanged"&&document.body.dataset.exitoverview?(O(s,e),s.to.dataset.appearanceCanStart="true"):c==="overviewhidden"&&(document.body.dataset.exitoverview="true",setTimeout(()=>{document.body.removeAttribute("data-exitoverview")},500),t.currentSlide&&(O(s,e),s.to.dataset.appearanceCanStart="true"))}}class j{constructor(e,n){b(this,"deck");b(this,"viewport");b(this,"revealEl");b(this,"slides");b(this,"options");b(this,"consts");b(this,"sections");b(this,"regularSections");b(this,"fragments");b(this,"appearances");this.deck=e,this.options=n,this.viewport=e.getViewportElement(),this.revealEl=e.getRevealElement(),this.slides=e.getSlidesElement(),this.consts=ae(n.baseclass,n.compatibilitybaseclass,n.compatibility),this.sections=this.slides.querySelectorAll("section"),this.regularSections=Array.from(this.sections).filter(i=>!ie.isStack(i)),this.fragments=this.slides.querySelectorAll(this.consts.fragmentSelector),this.appearances=[],/receiver/i.test(window.location.search)&&this.viewport.classList.add("sv")}async prepareElements(){this.appearances=Array.from(this.slides.querySelectorAll(this.consts.animatecss));for(const e of this.regularSections)ce(e,this.options,this.appearances);for(const e of this.appearances)fe(e,this.options,this.consts),ue(e,this.consts),e instanceof HTMLElement&&e.dataset.split&&de(e,e.dataset.split);for(const e of this.regularSections){const n=me(e,this.consts.baseclass,this.consts.fragmentClass);if(n)for(const i of n)he(i,this.options,this.consts)}}setupEventListeners(){for(const e of this.consts.eventnames)this.deck.on(e,n=>{Se(n,this.options,this.consts,this.deck)});this.viewport.addEventListener("animationend",e=>{e.target.classList.add("animationended")}),this.viewport.addEventListener("autoanimate",e=>{console.log("Autoanimate event triggered:",e)}),this.viewport.addEventListener("fragmenthidden",e=>{const n=e;if(n.fragment){n.fragment.classList.remove("animationended");const i=n.fragment.querySelectorAll(".animationended");for(const a of i)a.classList.remove("animationended")}})}static async create(e,n){const i=new j(e,n);return await i.prepareElements(),i.setupEventListeners(),i}}const B="appearance",ve=async(t,e,n)=>{E&&n.debug&&E.initialize(!0,B),await X(t,n),await j.create(e,n)};return()=>new W(B,ve,h).createInterface()});
